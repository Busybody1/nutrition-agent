<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nutrition Agent - Comprehensive Test Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 4px solid #ff9a9e;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ff9a9e;
        }

        .btn {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5px;
            font-size: 14px;
            padding: 8px 15px;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }

        .response {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .response.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .response.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .response.info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e1e5e9;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab.active {
            border-bottom-color: #ff9a9e;
            color: #ff9a9e;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #ff9a9e;
            margin: 10px 0;
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
        }

        .endpoint-group {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #ff9a9e;
        }

        .endpoint-group h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .endpoint-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e1e5e9;
        }

        .endpoint-item:last-child {
            border-bottom: none;
        }

        .endpoint-method {
            background: #ff9a9e;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .endpoint-path {
            font-family: monospace;
            color: #555;
        }

        .endpoint-description {
            color: #666;
            font-size: 0.9em;
            font-style: italic;
        }

        .meal-plan, .food-search {
            margin-top: 10px;
        }

        .meal-item {
            background: white;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #e1e5e9;
        }

        .meal-item h4 {
            color: #ff9a9e;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .food-item, .nutrition-item {
            padding: 5px 0;
            color: #555;
        }

        .food-item {
            border-bottom: 1px solid #f0f0f0;
            padding: 8px 0;
        }

        .nutrition-item {
            display: inline-block;
            margin-right: 15px;
            font-weight: 600;
            color: #ff9a9e;
        }

        h3 {
            color: #333;
            margin: 20px 0 10px 0;
            font-size: 1.2em;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçé Nutrition Agent - Comprehensive Test Interface</h1>
            <p>Test all nutrition features: Food logging, meal planning, AI analysis, and scalability infrastructure</p>
        </div>

        <div class="content">
            <div class="tabs">
                <div class="tab active" onclick="showTab('nutrition')">Nutrition Features</div>
                <div class="tab" onclick="showTab('scalability')">Scalability & Monitoring</div>
                <div class="tab" onclick="showTab('sessions')">Session Management</div>
                <div class="tab" onclick="showTab('performance')">Performance & Testing</div>
                <div class="tab" onclick="showTab('endpoints')">API Endpoints</div>
            </div>

            <!-- Nutrition Features Tab -->
            <div id="nutrition" class="tab-content active">
                <div class="section">
                    <h2>üçΩÔ∏è Food Logging</h2>
                    <p>Log food items and track nutrition intake.</p>
                    
                    <div class="form-group">
                        <label for="foodName">Food Name:</label>
                        <input type="text" id="foodName" value="apple" placeholder="Enter food name">
                    </div>
                    
                    <div class="form-group">
                        <label for="quantity">Quantity (grams):</label>
                        <input type="number" id="quantity" value="100" placeholder="Enter quantity in grams">
                    </div>
                    
                    <div class="form-group">
                        <label for="mealType">Meal Type:</label>
                        <select id="mealType">
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                            <option value="snack">Snack</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="logFood()">Log Food</button>
                    <div id="logFoodResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üìã Meal Planning</h2>
                    <p>Create personalized meal plans with AI assistance.</p>
                    
                    <div class="form-group">
                        <label for="mealPlanRequest">Meal Plan Request:</label>
                        <textarea id="mealPlanRequest" rows="3" placeholder="Describe your meal plan needs (e.g., 'I want a vegetarian meal plan for weight loss')">I want a healthy meal plan for weight loss</textarea>
                    </div>
                    
                    <div class="grid-2">
                        <button class="btn" onclick="createMealPlan()">Create Meal Plan</button>
                        <button class="btn" onclick="createRuleBasedMealPlan()">Rule-Based Plan</button>
                    </div>
                    <div id="mealPlanResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üîç Food Search & Analysis</h2>
                    <p>Search for foods and analyze nutrition information.</p>
                    
                    <div class="form-group">
                        <label for="searchQuery">Search Query:</label>
                        <input type="text" id="searchQuery" value="chicken" placeholder="Enter food to search">
                    </div>
                    
                    <div class="grid-3">
                        <button class="btn" onclick="searchFoods()">Search Foods</button>
                        <button class="btn" onclick="fuzzySearch()">Fuzzy Search</button>
                        <button class="btn" onclick="getFoodCount()">Get Food Count</button>
                    </div>
                    <div id="searchResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üßÆ Nutrition Calculations</h2>
                    <p>Calculate calories and nutrition for meals and recipes.</p>
                    
                    <div class="form-group">
                        <label for="calorieRequest">Calorie Request:</label>
                        <textarea id="calorieRequest" rows="3" placeholder="Describe what you want to calculate (e.g., 'Calculate calories for 200g chicken breast')">Calculate calories for 200g chicken breast</textarea>
                    </div>
                    
                    <div class="grid-2">
                        <button class="btn" onclick="calculateCalories()">Calculate Calories</button>
                        <button class="btn" onclick="getNutritionRecommendations()">Get Recommendations</button>
                    </div>
                    <div id="calculationResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üë®‚Äçüç≥ Recipe Creation</h2>
                    <p>Create recipes with AI assistance.</p>
                    
                    <div class="form-group">
                        <label for="recipeRequest">Recipe Request:</label>
                        <textarea id="recipeRequest" rows="3" placeholder="Describe the recipe you want to create (e.g., 'Create a healthy chicken salad recipe')">Create a healthy chicken salad recipe</textarea>
                    </div>
                    
                    <button class="btn" onclick="createRecipe()">Create Recipe</button>
                    <div id="recipeResponse" class="response"></div>
                </div>
            </div>

            <!-- Scalability & Monitoring Tab -->
            <div id="scalability" class="tab-content">
                <div class="section">
                    <h2>üîç Health Check</h2>
                    <p>Check the status of the Nutrition Agent and connected systems.</p>
                    <div class="grid-3">
                        <button class="btn" onclick="checkHealth()">Basic Health</button>
                        <button class="btn" onclick="checkDetailedHealth()">Detailed Health</button>
                        <button class="btn" onclick="checkDatabase()">Database Health</button>
                    </div>
                    <div id="healthResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üìä System Status</h2>
                    <p>Monitor system status and scalability metrics.</p>
                    <div class="grid-2">
                        <button class="btn" onclick="checkSystemStatus()">System Status</button>
                        <button class="btn" onclick="checkScalabilityStatus()">Scalability Status</button>
                    </div>
                    <div id="systemStatusResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üîß Database Testing</h2>
                    <p>Test database connections and configurations.</p>
                    <div class="grid-3">
                        <button class="btn" onclick="testNutritionDB()">Test Nutrition DB</button>
                        <button class="btn" onclick="testSharedDB()">Test Shared DB</button>
                        <button class="btn" onclick="testDatabaseSchema()">Test Schema</button>
                    </div>
                    <div id="databaseResponse" class="response"></div>
                </div>
            </div>

            <!-- Session Management Tab -->
            <div id="sessions" class="tab-content">
                <div class="section">
                    <h2>üîê Session Management</h2>
                    <p>Create and manage user sessions for the Nutrition Agent.</p>
                    
                    <div class="form-group">
                        <label for="sessionUserId">User ID:</label>
                        <input type="text" id="sessionUserId" value="test-user-123" placeholder="Enter user ID">
                    </div>
                    
                    <div class="grid-3">
                        <button class="btn" onclick="createSession()">Create Session</button>
                        <button class="btn" onclick="getSession()">Get Session</button>
                        <button class="btn" onclick="validateSession()">Validate Session</button>
                    </div>
                    <div id="sessionResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üí¨ Conversation Management</h2>
                    <p>Manage conversation state and history.</p>
                    
                    <div class="grid-3">
                        <button class="btn" onclick="getConversationState()">Get State</button>
                        <button class="btn" onclick="getConversationHistory()">Get History</button>
                        <button class="btn" onclick="resetConversation()">Reset Conversation</button>
                    </div>
                    <div id="conversationResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üìù Message Handling</h2>
                    <p>Send messages and search conversations.</p>
                    
                    <div class="form-group">
                        <label for="messageText">Message:</label>
                        <textarea id="messageText" rows="3" placeholder="Enter your message">Hello, I need help with meal planning</textarea>
                    </div>
                    
                    <div class="grid-2">
                        <button class="btn" onclick="sendMessage()">Send Message</button>
                        <button class="btn" onclick="searchConversations()">Search Conversations</button>
                    </div>
                    <div id="messageResponse" class="response"></div>
                </div>
            </div>

            <!-- Performance & Testing Tab -->
            <div id="performance" class="tab-content">
                <div class="section">
                    <h2>üìà Performance Metrics</h2>
                    <p>Monitor performance metrics and system KPIs.</p>
                    <div class="grid-2">
                        <button class="btn" onclick="getPerformanceMetrics()">Get Metrics</button>
                        <button class="btn" onclick="getPerformanceDashboard()">Dashboard</button>
                    </div>
                    <div id="performanceResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üß™ Performance Testing</h2>
                    <p>Run performance tests and benchmarks.</p>
                    <div class="grid-3">
                        <button class="btn" onclick="testFoodLogging()">Test Food Logging</button>
                        <button class="btn" onclick="testMealPlanning()">Test Meal Planning</button>
                        <button class="btn" onclick="testAIAnalysis()">Test AI Analysis</button>
                    </div>
                    <div id="testingResponse" class="response"></div>
                </div>

                <div class="section">
                    <h2>üîß Task Management</h2>
                    <p>Submit and monitor background tasks.</p>
                    
                    <div class="form-group">
                        <label for="taskDescription">Task Description:</label>
                        <textarea id="taskDescription" rows="3" placeholder="Describe the task to submit">Process nutrition analysis for user meals</textarea>
                    </div>
                    
                    <div class="grid-2">
                        <button class="btn" onclick="submitTask()">Submit Task</button>
                        <button class="btn" onclick="getTaskStatus()">Get Task Status</button>
                    </div>
                    <div id="taskResponse" class="response"></div>
                </div>
            </div>

            <!-- API Endpoints Tab -->
            <div id="endpoints" class="tab-content">
                <div class="section">
                    <h2>üîó Available API Endpoints</h2>
                    <p>Complete list of all available endpoints in the Nutrition Agent.</p>
                    
                    <div class="endpoint-group">
                        <h4>Core Nutrition Features</h4>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/log-food</span>
                            <span class="endpoint-description">Log food intake</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/meal-plan</span>
                            <span class="endpoint-description">Create meal plan</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/search-foods-comprehensive</span>
                            <span class="endpoint-description">Search foods</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/calculate-calories</span>
                            <span class="endpoint-description">Calculate nutrition</span>
                        </div>
                    </div>

                    <div class="endpoint-group">
                        <h4>Session & Conversation Management</h4>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/api/sessions/create</span>
                            <span class="endpoint-description">Create user session</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/api/sessions/{session_token}</span>
                            <span class="endpoint-description">Get session info</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <span class="endpoint-path">/api/conversations/message</span>
                            <span class="endpoint-description">Send message</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/api/conversations/history</span>
                            <span class="endpoint-description">Get conversation history</span>
                        </div>
                    </div>

                    <div class="endpoint-group">
                        <h4>Performance & Monitoring</h4>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/api/performance/metrics</span>
                            <span class="endpoint-description">Get performance metrics</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/api/performance/dashboard</span>
                            <span class="endpoint-description">Performance dashboard</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/api/scalability/status</span>
                            <span class="endpoint-description">Scalability status</span>
                        </div>
                    </div>

                    <div class="endpoint-group">
                        <h4>Health & Testing</h4>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/health</span>
                            <span class="endpoint-description">Basic health check</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/health/detailed</span>
                            <span class="endpoint-description">Detailed health info</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <span class="endpoint-path">/test/database</span>
                            <span class="endpoint-description">Test database connection</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        async function makeRequest(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };

                if (data) {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(endpoint, options);
                const result = await response.json();
                
                return {
                    success: response.ok,
                    data: result,
                    status: response.status
                };
            } catch (error) {
                return {
                    success: false,
                    error: error.message,
                    status: 0
                };
            }
        }

        function displayResponse(elementId, response, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = `response ${type}`;
            element.textContent = JSON.stringify(response, null, 2);
        }

        // Nutrition Functions
        async function logFood() {
            const foodName = document.getElementById('foodName').value;
            const quantity = document.getElementById('quantity').value;
            const mealType = document.getElementById('mealType').value;
            
            const response = await makeRequest('/log-food', 'POST', {
                food_name: foodName,
                quantity_g: parseInt(quantity),
                meal_type: mealType,
                user_id: 'test-user-123'
            });
            
            displayResponse('logFoodResponse', response, response.success ? 'success' : 'error');
        }

        async function createMealPlan() {
            const request = document.getElementById('mealPlanRequest').value;
            
            const response = await makeRequest('/meal-plan', 'POST', {
                request: request,
                user_id: 'test-user-123'
            });
            
            displayResponse('mealPlanResponse', response, response.success ? 'success' : 'error');
        }

        async function createRuleBasedMealPlan() {
            const request = document.getElementById('mealPlanRequest').value;
            
            const response = await makeRequest('/meal-plan-rule-based', 'POST', {
                request: request,
                user_id: 'test-user-123'
            });
            
            displayResponse('mealPlanResponse', response, response.success ? 'success' : 'error');
        }

        async function searchFoods() {
            const query = document.getElementById('searchQuery').value;
            
            const response = await makeRequest('/search-foods-comprehensive', 'POST', {
                query: query,
                user_id: 'test-user-123'
            });
            
            displayResponse('searchResponse', response, response.success ? 'success' : 'error');
        }

        async function fuzzySearch() {
            const query = document.getElementById('searchQuery').value;
            
            const response = await makeRequest('/fuzzy-search', 'POST', {
                query: query,
                user_id: 'test-user-123'
            });
            
            displayResponse('searchResponse', response, response.success ? 'success' : 'error');
        }

        async function getFoodCount() {
            const response = await makeRequest('/foods/count');
            displayResponse('searchResponse', response, response.success ? 'success' : 'error');
        }

        async function calculateCalories() {
            const request = document.getElementById('calorieRequest').value;
            
            const response = await makeRequest('/calculate-calories', 'POST', {
                request: request,
                user_id: 'test-user-123'
            });
            
            displayResponse('calculationResponse', response, response.success ? 'success' : 'error');
        }

        async function getNutritionRecommendations() {
            const request = document.getElementById('calorieRequest').value;
            
            const response = await makeRequest('/nutrition-recommendations', 'POST', {
                request: request,
                user_id: 'test-user-123'
            });
            
            displayResponse('calculationResponse', response, response.success ? 'success' : 'error');
        }

        async function createRecipe() {
            const request = document.getElementById('recipeRequest').value;
            
            const response = await makeRequest('/create-recipe', 'POST', {
                request: request,
                user_id: 'test-user-123'
            });
            
            displayResponse('recipeResponse', response, response.success ? 'success' : 'error');
        }

        // Health & Status Functions
        async function checkHealth() {
            const response = await makeRequest('/health');
            displayResponse('healthResponse', response, response.success ? 'success' : 'error');
        }

        async function checkDetailedHealth() {
            const response = await makeRequest('/health/detailed');
            displayResponse('healthResponse', response, response.success ? 'success' : 'error');
        }

        async function checkDatabase() {
            const response = await makeRequest('/test/database');
            displayResponse('healthResponse', response, response.success ? 'success' : 'error');
        }

        async function checkSystemStatus() {
            const response = await makeRequest('/api/scalability/status');
            displayResponse('systemStatusResponse', response, response.success ? 'success' : 'error');
        }

        async function checkScalabilityStatus() {
            const response = await makeRequest('/api/scalability/status');
            displayResponse('systemStatusResponse', response, response.success ? 'success' : 'error');
        }

        async function testNutritionDB() {
            const response = await makeRequest('/test-nutrition-db');
            displayResponse('databaseResponse', response, response.success ? 'success' : 'error');
        }

        async function testSharedDB() {
            const response = await makeRequest('/test-shared-db');
            displayResponse('databaseResponse', response, response.success ? 'success' : 'error');
        }

        async function testDatabaseSchema() {
            const response = await makeRequest('/debug/schema');
            displayResponse('databaseResponse', response, response.success ? 'success' : 'error');
        }

        // Session Management Functions
        async function createSession() {
            const userId = document.getElementById('sessionUserId').value;
            
            const response = await makeRequest('/api/sessions/create', 'POST', {
                user_id: userId
            });
            
            displayResponse('sessionResponse', response, response.success ? 'success' : 'error');
        }

        async function getSession() {
            const response = await makeRequest('/api/sessions/test-session-token');
            displayResponse('sessionResponse', response, response.success ? 'success' : 'error');
        }

        async function validateSession() {
            const response = await makeRequest('/api/sessions/test-session-token/validate', 'POST');
            displayResponse('sessionResponse', response, response.success ? 'success' : 'error');
        }

        async function getConversationState() {
            const response = await makeRequest('/api/conversations/state');
            displayResponse('conversationResponse', response, response.success ? 'success' : 'error');
        }

        async function getConversationHistory() {
            const response = await makeRequest('/api/conversations/history');
            displayResponse('conversationResponse', response, response.success ? 'success' : 'error');
        }

        async function resetConversation() {
            const response = await makeRequest('/api/conversations/reset', 'POST');
            displayResponse('conversationResponse', response, response.success ? 'success' : 'error');
        }

        async function sendMessage() {
            const message = document.getElementById('messageText').value;
            
            const response = await makeRequest('/api/conversations/message', 'POST', {
                message: message,
                user_id: 'test-user-123'
            });
            
            displayResponse('messageResponse', response, response.success ? 'success' : 'error');
        }

        async function searchConversations() {
            const response = await makeRequest('/api/conversations/search', 'POST', {
                query: 'meal planning',
                user_id: 'test-user-123'
            });
            
            displayResponse('messageResponse', response, response.success ? 'success' : 'error');
        }

        // Performance Functions
        async function getPerformanceMetrics() {
            const response = await makeRequest('/api/performance/metrics');
            displayResponse('performanceResponse', response, response.success ? 'success' : 'error');
        }

        async function getPerformanceDashboard() {
            const response = await makeRequest('/api/performance/dashboard');
            displayResponse('performanceResponse', response, response.success ? 'success' : 'error');
        }

        async function testFoodLogging() {
            const response = await makeRequest('/test-food-logging', 'POST', {
                user_id: 'test-user-123'
            });
            displayResponse('testingResponse', response, response.success ? 'success' : 'error');
        }

        async function testMealPlanning() {
            const response = await makeRequest('/test-ai-meal-plan', 'POST', {
                user_id: 'test-user-123'
            });
            displayResponse('testingResponse', response, response.success ? 'success' : 'error');
        }

        async function testAIAnalysis() {
            const response = await makeRequest('/execute-tool', 'POST', {
                tool_name: 'nutrition_analysis',
                parameters: { user_id: 'test-user-123' }
            });
            displayResponse('testingResponse', response, response.success ? 'success' : 'error');
        }

        async function submitTask() {
            const description = document.getElementById('taskDescription').value;
            
            const response = await makeRequest('/api/tasks/submit', 'POST', {
                description: description,
                user_id: 'test-user-123'
            });
            
            displayResponse('taskResponse', response, response.success ? 'success' : 'error');
        }

        async function getTaskStatus() {
            const response = await makeRequest('/api/tasks/test-task-id');
            displayResponse('taskResponse', response, response.success ? 'success' : 'error');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkHealth();
        });
    </script>
</body>
</html> 